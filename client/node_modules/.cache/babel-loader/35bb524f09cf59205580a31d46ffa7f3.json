{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dee\\\\Desktop\\\\test-deploy\\\\client\\\\src\\\\context\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useEffect, useReducer, useState, useContext } from 'react';\nimport AuthReducer from './AuthReducer';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem(`user`)) || null,\n  isFetching: false,\n  error: false\n};\nconst AuthContext = /*#__PURE__*/createContext(INITIAL_STATE);\n_c = AuthContext;\n\nconst AuthContextProvider = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [addedFave, setAddedFave] = useState(user ? user.favorites : []);\n  const [currentUser, setCurrentUser] = useState(user);\n  useEffect(() => {\n    localStorage.setItem(`user`, JSON.stringify(state.user));\n  }, [state.user]);\n  useEffect(() => {\n    localStorage.setItem(`user`, JSON.stringify(currentUser));\n  }, [currentUser]);\n  let newF; // adds favorite to the local storage and user object\n\n  const addFavorite = async (user, _id) => {\n    try {\n      newF = addedFave.filter(item => item !== _id);\n      const newFavorites = [...newF, _id];\n      const response = await axios.patch(`${process.env.REACT_APP_API_URL}/users/update/${user._id}`, {\n        favorites: newFavorites\n      });\n      setAddedFave(newFavorites);\n\n      if (user) {\n        setCurrentUser(response.data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }; // deletes favorite from the local storage and user object\n\n\n  const deleteFavorite = async (user, _id) => {\n    const newList = currentUser.favorites.filter(item => item !== _id);\n\n    try {\n      const response = await axios.patch(`${process.env.REACT_APP_API_URL}/users/update/${user._id}`, {\n        favorites: newList\n      });\n      setCurrentUser(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user: state.user,\n      isFetching: state.isFetching,\n      error: state.error,\n      dispatch,\n      addFavorite,\n      deleteFavorite,\n      currentUser,\n      setCurrentUser\n    },\n    children: !state.isFetching && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthContextProvider, \"2TYWBO3mJhSe/AixPMlL+n8LuA8=\");\n\n_c2 = AuthContextProvider;\nexport { AuthContext, AuthContextProvider };\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuthContext\");\n$RefreshReg$(_c2, \"AuthContextProvider\");","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/context/AuthContext.js"],"names":["React","createContext","useEffect","useReducer","useState","useContext","AuthReducer","axios","INITIAL_STATE","user","JSON","parse","localStorage","getItem","isFetching","error","AuthContext","AuthContextProvider","children","state","dispatch","addedFave","setAddedFave","favorites","currentUser","setCurrentUser","setItem","stringify","newF","addFavorite","_id","filter","item","newFavorites","response","patch","process","env","REACT_APP_API_URL","data","console","log","deleteFavorite","newList"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useReducer, useState, useContext } from 'react';\r\nimport AuthReducer from './AuthReducer';\r\nimport axios from 'axios';\r\nconst INITIAL_STATE = {\r\n  user: JSON.parse(localStorage.getItem(`user`)) || null,\r\n  isFetching: false,\r\n  error: false,\r\n};\r\n\r\nconst AuthContext = createContext(INITIAL_STATE);\r\n\r\nconst AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const [addedFave, setAddedFave] = useState(user ? user.favorites : []);\r\n  const [currentUser, setCurrentUser] = useState(user);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(`user`, JSON.stringify(state.user));\r\n  }, [state.user]);\r\n  useEffect(() => {\r\n    localStorage.setItem(`user`, JSON.stringify(currentUser));\r\n  }, [currentUser]);\r\n\r\n  let newF;\r\n  // adds favorite to the local storage and user object\r\n  const addFavorite = async (user, _id) => {\r\n    try {\r\n      newF = addedFave.filter((item) => item !== _id);\r\n      const newFavorites = [...newF, _id];\r\n      const response = await axios.patch(\r\n        `${process.env.REACT_APP_API_URL}/users/update/${user._id}`,\r\n        {\r\n          favorites: newFavorites,\r\n        },\r\n      );\r\n      setAddedFave(newFavorites);\r\n      if (user) {\r\n        setCurrentUser(response.data);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // deletes favorite from the local storage and user object\r\n  const deleteFavorite = async (user, _id) => {\r\n    const newList = currentUser.favorites.filter((item) => item !== _id);\r\n\r\n    try {\r\n      const response = await axios.patch(\r\n        `${process.env.REACT_APP_API_URL}/users/update/${user._id}`,\r\n        {\r\n          favorites: newList,\r\n        },\r\n      );\r\n\r\n      setCurrentUser(response.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user: state.user,\r\n        isFetching: state.isFetching,\r\n        error: state.error,\r\n        dispatch,\r\n        addFavorite,\r\n        deleteFavorite,\r\n        currentUser,\r\n        setCurrentUser,\r\n      }}\r\n    >\r\n      {!state.isFetching && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport { AuthContext, AuthContextProvider };\r\n"]},"metadata":{},"sourceType":"module"}