{"ast":null,"code":"import _objectSpread from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Form,Button}from'react-bootstrap';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var EditProfile=function EditProfile(_ref){var user=_ref.user;var _useState=useState({first_name:user.first_name,last_name:user.last_name,email:user.email,phone:user.phone,avatar:user.avatar,addresses:user.addresses}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(user.addresses.map(function(address){return{_id:address._id,first_name:address.first_name,last_name:address.last_name,country:address.country,city:address.city,street_name:address.street_name,building_number:address.building_number,extension:address.extension,post_code:address.post_code,comment:address.comment};})),_useState4=_slicedToArray(_useState3,2),addressesData=_useState4[0],setAddressesData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),addressChanged=_useState6[0],setAddressChanged=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isUserDataChanged=_useState8[0],setIsUserDataChanged=_useState8[1];var editData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var addr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();if(!isUserDataChanged){_context.next=6;break;}_context.next=5;return axios.patch(\"\".concat(process.env.REACT_APP_API_URL,\"/users/update/\").concat(user._id),userData);case 5:setIsUserDataChanged(false);case 6:if(!(addressChanged.length>0)){_context.next=11;break;}addr=addressesData.find(function(address){return address._id==addressChanged;});_context.next=10;return axios.patch(\"\".concat(process.env.REACT_APP_API_URL,\"/addresses/update/\").concat(addressChanged),addr);case 10:setAddressChanged('');case 11:alert('Successfully updated!');_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function editData(_x){return _ref2.apply(this,arguments);};}();var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),deleteId=_useState10[0],setDeleteId=_useState10[1];useEffect(function(){if(deleteId.length>0){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.patch(\"\".concat(process.env.REACT_APP_API_URL,\"/addresses/delete/\").concat(deleteId,\"/\").concat(user._id),{addresses:userData.addresses});case 3:alert('Address is deleted!');_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}))();}},[deleteId]);var _useState11=useState({user:user._id,first_name:'',last_name:'',country:'',city:'',street_name:'',building_number:'',extension:'',post_code:'',comment:''}),_useState12=_slicedToArray(_useState11,2),newAddress=_useState12[0],setNewAddress=_useState12[1];var addAddress=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var response,addressAdded;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;e.preventDefault();_context3.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/addresses/create\"),newAddress);case 4:response=_context3.sent;addressAdded={_id:response.data.address._id,first_name:response.data.address.first_name,last_name:response.data.address.last_name,country:response.data.address.country,city:response.data.address.city,street_name:response.data.address.street_name,building_number:response.data.address.building_number,extension:response.data.address.extension,post_code:response.data.address.post_code,comment:response.data.address.comment};setAddressesData(function(oldArr){return[].concat(_toConsumableArray(oldArr),[addressAdded]);});setUserData(_objectSpread(_objectSpread({},userData),{},{addresses:[].concat(_toConsumableArray(userData.addresses),[addressAdded])}));setNewAddress({user:user._id,first_name:'',last_name:'',country:'',city:'',street_name:'',building_number:'',extension:'',post_code:'',comment:''});alert('Address is added!');_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return function addAddress(_x2){return _ref4.apply(this,arguments);};}();var addresses=[];if(addressesData){addresses=addressesData.map(function(address,index){return/*#__PURE__*/_jsxs(Card,{style:{borderColor:'var(--color-main)'},className:\"m-3 p-3\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Address \",index+1]})}),/*#__PURE__*/_jsx(Col,{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",style:{width:'10em'},onClick:function onClick(){setUserData(_objectSpread(_objectSpread({},userData),{},{addresses:userData.addresses.filter(function(addr){return addr._id!==address._id;})}));setAddressesData(function(oldArr){return oldArr.filter(function(addr){return addr._id!==address._id;});});setDeleteId(address._id);},children:\"Delete\"})})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Recipient (if the name is different from yours)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Label,{children:\"First Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.first_name,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.first_name=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.last_name,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.last_name=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Country:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.country,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.country=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"City:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.city,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.city=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Street:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.street_name,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.street_name=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Building Number:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.building_number,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.building_number=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Extension:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.extension,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.extension=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Postal code:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.post_code,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.post_code=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Comment:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:address.comment,onChange:function onChange(e){setAddressesData(function(oldArr){var newArr=oldArr.map(function(item){if(item._id==address._id){item.comment=e.target.value;}return item;});return newArr;});setAddressChanged(address._id);}})]})]},address._id);});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:editData,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:userData.first_name,onChange:function onChange(e){setUserData(_objectSpread(_objectSpread({},userData),{},{first_name:e.target.value}));setIsUserDataChanged(true);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:userData.last_name,onChange:function onChange(e){setUserData(_objectSpread(_objectSpread({},userData),{},{last_name:e.target.value}));setIsUserDataChanged(true);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:userData.email,onChange:function onChange(e){setUserData(_objectSpread(_objectSpread({},userData),{},{email:e.target.value}));setIsUserDataChanged(true);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Phone Number:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:userData.phone,onChange:function onChange(e){setUserData(_objectSpread(_objectSpread({},userData),{},{phone:e.target.value}));setIsUserDataChanged(true);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(e){setUserData(_objectSpread(_objectSpread({},userData),{},{password:e.target.value}));setIsUserDataChanged(true);}})]}),addresses,/*#__PURE__*/_jsx(Button,{className:\"w-100\",type:\"submit\",style:{background:'var(--color-main)'},children:\"Save\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3\",children:\"Add new address\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:addAddress,children:[/*#__PURE__*/_jsxs(Card,{style:{borderColor:'var(--color-main)'},className:\"m-3 p-3\",children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Recipient (if the name is different from yours)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Label,{children:\"First Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:newAddress.first_name,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{first_name:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:newAddress.last_name,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{last_name:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Country: *\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:newAddress.country,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{country:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"City: *\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:newAddress.city,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{city:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Street: *\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:newAddress.street_name,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{street_name:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Building Number: *\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:newAddress.building_number,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{building_number:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Extension:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:newAddress.extension,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{extension:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Postal code: *\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:newAddress.post_code,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{post_code:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Comment:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:newAddress.comment,onChange:function onChange(e){setNewAddress(_objectSpread(_objectSpread({},newAddress),{},{comment:e.target.value}));}})]})]}),/*#__PURE__*/_jsx(Button,{className:\"w-100\",type:\"submit\",style:{background:'var(--color-main)'},children:\"Add\"})]})]});};export default EditProfile;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/EditProfile.js"],"names":["React","useState","useEffect","Container","Row","Col","Card","Form","Button","axios","EditProfile","user","first_name","last_name","email","phone","avatar","addresses","userData","setUserData","map","address","_id","country","city","street_name","building_number","extension","post_code","comment","addressesData","setAddressesData","addressChanged","setAddressChanged","isUserDataChanged","setIsUserDataChanged","editData","e","preventDefault","patch","process","env","REACT_APP_API_URL","length","addr","find","alert","console","log","deleteId","setDeleteId","newAddress","setNewAddress","addAddress","post","response","addressAdded","data","oldArr","index","borderColor","textAlign","width","filter","newArr","item","target","value","password","background"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Form, Button } from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nconst EditProfile = ({ user }) => {\r\n  const [userData, setUserData] = useState({\r\n    first_name: user.first_name,\r\n    last_name: user.last_name,\r\n    email: user.email,\r\n    phone: user.phone,\r\n    avatar: user.avatar,\r\n    addresses: user.addresses,\r\n  });\r\n\r\n  const [addressesData, setAddressesData] = useState(\r\n    user.addresses.map((address) => {\r\n      return {\r\n        _id: address._id,\r\n        first_name: address.first_name,\r\n        last_name: address.last_name,\r\n        country: address.country,\r\n        city: address.city,\r\n        street_name: address.street_name,\r\n        building_number: address.building_number,\r\n        extension: address.extension,\r\n        post_code: address.post_code,\r\n        comment: address.comment,\r\n      };\r\n    }),\r\n  );\r\n  const [addressChanged, setAddressChanged] = useState('');\r\n  const [isUserDataChanged, setIsUserDataChanged] = useState(false);\r\n\r\n  const editData = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      if (isUserDataChanged) {\r\n        await axios.patch(`${process.env.REACT_APP_API_URL}/users/update/${user._id}`, userData);\r\n        setIsUserDataChanged(false);\r\n      }\r\n      if (addressChanged.length > 0) {\r\n        const addr = addressesData.find((address) => address._id == addressChanged);\r\n        await axios.patch(\r\n          `${process.env.REACT_APP_API_URL}/addresses/update/${addressChanged}`,\r\n          addr,\r\n        );\r\n        setAddressChanged('');\r\n      }\r\n      alert('Successfully updated!');\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const [deleteId, setDeleteId] = useState('');\r\n  useEffect(() => {\r\n    if (deleteId.length > 0) {\r\n      (async () => {\r\n        try {\r\n          await axios.patch(\r\n            `${process.env.REACT_APP_API_URL}/addresses/delete/${deleteId}/${user._id}`,\r\n            { addresses: userData.addresses },\r\n          );\r\n          alert('Address is deleted!');\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      })();\r\n    }\r\n  }, [deleteId]);\r\n\r\n  const [newAddress, setNewAddress] = useState({\r\n    user: user._id,\r\n    first_name: '',\r\n    last_name: '',\r\n    country: '',\r\n    city: '',\r\n    street_name: '',\r\n    building_number: '',\r\n    extension: '',\r\n    post_code: '',\r\n    comment: '',\r\n  });\r\n\r\n  const addAddress = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/addresses/create`,\r\n        newAddress,\r\n      );\r\n\r\n      const addressAdded = {\r\n        _id: response.data.address._id,\r\n        first_name: response.data.address.first_name,\r\n        last_name: response.data.address.last_name,\r\n        country: response.data.address.country,\r\n        city: response.data.address.city,\r\n        street_name: response.data.address.street_name,\r\n        building_number: response.data.address.building_number,\r\n        extension: response.data.address.extension,\r\n        post_code: response.data.address.post_code,\r\n        comment: response.data.address.comment,\r\n      };\r\n      setAddressesData((oldArr) => [...oldArr, addressAdded]);\r\n      setUserData({\r\n        ...userData,\r\n        addresses: [...userData.addresses, addressAdded],\r\n      });\r\n      setNewAddress({\r\n        user: user._id,\r\n        first_name: '',\r\n        last_name: '',\r\n        country: '',\r\n        city: '',\r\n        street_name: '',\r\n        building_number: '',\r\n        extension: '',\r\n        post_code: '',\r\n        comment: '',\r\n      });\r\n      alert('Address is added!');\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  let addresses = [];\r\n  if (addressesData) {\r\n    addresses = addressesData.map((address, index) => {\r\n      return (\r\n        <Card style={{ borderColor: 'var(--color-main)' }} key={address._id} className=\"m-3 p-3\">\r\n          <Row>\r\n            <Col>\r\n              <h4>Address {index + 1}</h4>\r\n            </Col>\r\n            <Col style={{ textAlign: 'right' }}>\r\n              <Button\r\n                variant=\"danger\"\r\n                style={{ width: '10em' }}\r\n                onClick={() => {\r\n                  setUserData({\r\n                    ...userData,\r\n                    addresses: userData.addresses.filter((addr) => addr._id !== address._id),\r\n                  });\r\n                  setAddressesData((oldArr) => oldArr.filter((addr) => addr._id !== address._id));\r\n                  setDeleteId(address._id);\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n          <Form.Group>\r\n            <Form.Label>Recipient (if the name is different from yours)</Form.Label>\r\n            <br />\r\n            <Form.Label>First Name:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.first_name}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.first_name = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Last Name:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.last_name}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.last_name = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Country:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.country}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.country = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>City:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.city}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.city = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Street:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.street_name}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.street_name = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Building Number:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.building_number}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.building_number = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Extension:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.extension}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.extension = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Postal code:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.post_code}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.post_code = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Comment:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={address.comment}\r\n              onChange={(e) => {\r\n                setAddressesData((oldArr) => {\r\n                  const newArr = oldArr.map((item) => {\r\n                    if (item._id == address._id) {\r\n                      item.comment = e.target.value;\r\n                    }\r\n                    return item;\r\n                  });\r\n                  return newArr;\r\n                });\r\n                setAddressChanged(address._id);\r\n              }}\r\n            />\r\n          </Form.Group>\r\n        </Card>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Form onSubmit={editData}>\r\n        <Form.Group>\r\n          <Form.Label>First Name:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={userData.first_name}\r\n            onChange={(e) => {\r\n              setUserData({ ...userData, first_name: e.target.value });\r\n              setIsUserDataChanged(true);\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Last Name:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={userData.last_name}\r\n            onChange={(e) => {\r\n              setUserData({ ...userData, last_name: e.target.value });\r\n              setIsUserDataChanged(true);\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Email:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={userData.email}\r\n            onChange={(e) => {\r\n              setUserData({ ...userData, email: e.target.value });\r\n              setIsUserDataChanged(true);\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Phone Number:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            value={userData.phone}\r\n            onChange={(e) => {\r\n              setUserData({ ...userData, phone: e.target.value });\r\n              setIsUserDataChanged(true);\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Password:</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e) => {\r\n              setUserData({ ...userData, password: e.target.value });\r\n              setIsUserDataChanged(true);\r\n            }}\r\n          />\r\n        </Form.Group>\r\n\r\n        {addresses}\r\n\r\n        <Button className=\"w-100\" type=\"submit\" style={{ background: 'var(--color-main)' }}>\r\n          Save\r\n        </Button>\r\n      </Form>\r\n      <hr />\r\n      <h4 className=\"mt-3\">Add new address</h4>\r\n      <Form onSubmit={addAddress}>\r\n        <Card style={{ borderColor: 'var(--color-main)' }} className=\"m-3 p-3\">\r\n          <Form.Group>\r\n            <Form.Label>Recipient (if the name is different from yours)</Form.Label>\r\n            <br />\r\n            <Form.Label>First Name:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={newAddress.first_name}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, first_name: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Last Name:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={newAddress.last_name}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, last_name: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Country: *</Form.Label>\r\n            <Form.Control\r\n              required\r\n              type=\"text\"\r\n              value={newAddress.country}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, country: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>City: *</Form.Label>\r\n            <Form.Control\r\n              required\r\n              type=\"text\"\r\n              value={newAddress.city}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, city: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Street: *</Form.Label>\r\n            <Form.Control\r\n              required\r\n              type=\"text\"\r\n              value={newAddress.street_name}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, street_name: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Building Number: *</Form.Label>\r\n            <Form.Control\r\n              required\r\n              type=\"text\"\r\n              value={newAddress.building_number}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, building_number: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Extension:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={newAddress.extension}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, extension: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Postal code: *</Form.Label>\r\n            <Form.Control\r\n              required\r\n              type=\"text\"\r\n              value={newAddress.post_code}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, post_code: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Comment:</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={newAddress.comment}\r\n              onChange={(e) => {\r\n                setNewAddress({ ...newAddress, comment: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Group>\r\n        </Card>\r\n        <Button className=\"w-100\" type=\"submit\" style={{ background: 'var(--color-main)' }}>\r\n          Add\r\n        </Button>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"]},"metadata":{},"sourceType":"module"}