{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import{Container,Form,Button,Card,Alert}from'react-bootstrap';import{Link,useHistory}from'react-router-dom';import axios from'axios';import FacebookSignIn from'./FacebookSignIn';import GoogleSignIn from'./GoogleSignIn';import Filters from'./Filters';import{FaBellSlash}from'react-icons/fa';import{set}from'mongoose';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignUp=function SignUp(){var firstNameRef=useRef(false);var lastNameRef=useRef();var emailRef=useRef();var passwordRef=useRef();var passwordConfirmRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var history=useHistory();function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var passwordWithNum,response,validateEmail,user,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(passwordRef.current.value!==passwordConfirmRef.current.value)){_context.next=3;break;}return _context.abrupt(\"return\",setError('Passwords do not match'));case 3:if(!(passwordRef.current.value.length<6)){_context.next=5;break;}return _context.abrupt(\"return\",setError('Passwords must consist of minimum 6 symbols'));case 5:passwordWithNum=[];Object.assign([],passwordRef.current.value).map(function(item){function isNumeric(value){return /^-?\\d+$/.test(value);}// eslint-disable-next-line no-unused-expressions\nisNumeric(item)?passwordWithNum.push(item):null;});if(!(passwordWithNum.length===0)){_context.next=9;break;}return _context.abrupt(\"return\",setError('Password must include at least one number'));case 9:_context.prev=9;_context.next=12;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users\"));case 12:response=_context.sent;validateEmail=response.data.find(function(item){return emailRef.current.value===item.email;});if(!(validateEmail!==undefined)){_context.next=16;break;}return _context.abrupt(\"return\",setError('An account with this email already exists'));case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](9);setError('Failed to create an account');case 21:user={first_name:firstNameRef.current.value,last_name:lastNameRef.current.value,email:emailRef.current.value,password:passwordRef.current.value};_context.prev=22;setError('');setLoading(true);_context.next=27;return axios.post(\"http://localhost:3000/api/v1/users/signup\",user);case 27:_context.next=29;return axios.get(\"http://localhost:3000/api/v1/users\");case 29:_response=_context.sent;setSuccess(true);setTimeout(function(){history.push('/signin');},2500);_context.next=37;break;case 34:_context.prev=34;_context.t1=_context[\"catch\"](22);setError('Failed to create an account');case 37:setLoading(false);case 38:case\"end\":return _context.stop();}}},_callee,null,[[9,18],[22,34]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{className:\"d-flex align-items-center justify-content-center \",style:{minHeight:'75vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-200\",children:[/*#__PURE__*/_jsx(Card,{style:{width:'22rem'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"Your account has been created successfully\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"firstNameRef\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:firstNameRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"lastNameRef\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:lastNameRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passwordRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password-confirm\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password Confirmation\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passwordConfirmRef,required:true})]}),/*#__PURE__*/_jsx(Button,{disabled:loading,className:\"w-100\",type:\"submit\",style:{background:'var(--color-main)'},children:\"Sign Up\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 text-center mt-2\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/signin\",style:{color:'var(--color-main)'},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(GoogleSignIn,{}),/*#__PURE__*/_jsx(FacebookSignIn,{})]})})});};export default SignUp;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/SignUp.js"],"names":["React","useRef","useState","Container","Form","Button","Card","Alert","Link","useHistory","axios","FacebookSignIn","GoogleSignIn","Filters","FaBellSlash","set","SignUp","firstNameRef","lastNameRef","emailRef","passwordRef","passwordConfirmRef","success","setSuccess","error","setError","loading","setLoading","history","handleSubmit","e","preventDefault","current","value","length","passwordWithNum","Object","assign","map","item","isNumeric","test","push","get","process","env","REACT_APP_API_URL","response","validateEmail","data","find","email","undefined","user","first_name","last_name","password","post","setTimeout","minHeight","width","background","color"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { Container, Form, Button, Card, Alert } from 'react-bootstrap';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport FacebookSignIn from './FacebookSignIn';\r\nimport GoogleSignIn from './GoogleSignIn';\r\nimport Filters from './Filters';\r\nimport { FaBellSlash } from 'react-icons/fa';\r\nimport { set } from 'mongoose';\r\n\r\nconst SignUp = () => {\r\n  const firstNameRef = useRef(false);\r\n  const lastNameRef = useRef();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const passwordConfirmRef = useRef();\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n      return setError('Passwords do not match');\r\n    }\r\n\r\n    if (passwordRef.current.value.length < 6) {\r\n      return setError('Passwords must consist of minimum 6 symbols');\r\n    }\r\n\r\n    let passwordWithNum = [];\r\n    Object.assign([], passwordRef.current.value).map((item) => {\r\n      function isNumeric(value) {\r\n        return /^-?\\d+$/.test(value);\r\n      }\r\n      // eslint-disable-next-line no-unused-expressions\r\n      isNumeric(item) ? passwordWithNum.push(item) : null;\r\n    });\r\n    if (passwordWithNum.length === 0) {\r\n      return setError('Password must include at least one number');\r\n    }\r\n    try {\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/users`,\r\n      );\r\n      let validateEmail = response.data.find(\r\n        (item) => emailRef.current.value === item.email,\r\n      );\r\n      if (validateEmail !== undefined) {\r\n        return setError('An account with this email already exists');\r\n      }\r\n    } catch (e) {\r\n      setError('Failed to create an account');\r\n    }\r\n\r\n    const user = {\r\n      first_name: firstNameRef.current.value,\r\n      last_name: lastNameRef.current.value,\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value,\r\n    };\r\n\r\n    try {\r\n      setError('');\r\n      setLoading(true);\r\n      await axios.post(`http://localhost:3000/api/v1/users/signup`, user);\r\n      const response = await axios.get(`http://localhost:3000/api/v1/users`);\r\n\r\n      setSuccess(true);\r\n      setTimeout(() => {\r\n        history.push('/signin');\r\n      }, 2500);\r\n    } catch (e) {\r\n      setError('Failed to create an account');\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Container\r\n        className=\"d-flex align-items-center justify-content-center \"\r\n        style={{ minHeight: '75vh' }}\r\n      >\r\n        <div className=\"w-200\">\r\n          <Card style={{ width: '22rem' }}>\r\n            <Card.Body>\r\n              <h2 className=\"text-center mb-4\">Sign Up</h2>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              {success && (\r\n                <Alert variant=\"success\">\r\n                  Your account has been created successfully\r\n                </Alert>\r\n              )}\r\n              <Form onSubmit={handleSubmit}>\r\n                <Form.Group id=\"firstNameRef\">\r\n                  <Form.Label>First Name</Form.Label>\r\n                  <Form.Control type=\"text\" ref={firstNameRef} required />\r\n                </Form.Group>\r\n                <Form.Group id=\"lastNameRef\">\r\n                  <Form.Label>Last Name</Form.Label>\r\n                  <Form.Control type=\"text\" ref={lastNameRef} required />\r\n                </Form.Group>\r\n                <Form.Group id=\"email\">\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control type=\"email\" ref={emailRef} required />\r\n                </Form.Group>\r\n                <Form.Group id=\"password\">\r\n                  <Form.Label>Password</Form.Label>\r\n                  <Form.Control type=\"password\" ref={passwordRef} required />\r\n                </Form.Group>\r\n                <Form.Group id=\"password-confirm\">\r\n                  <Form.Label>Password Confirmation</Form.Label>\r\n                  <Form.Control\r\n                    type=\"password\"\r\n                    ref={passwordConfirmRef}\r\n                    required\r\n                  />\r\n                </Form.Group>\r\n                <Button\r\n                  disabled={loading}\r\n                  className=\"w-100\"\r\n                  type=\"submit\"\r\n                  style={{ background: 'var(--color-main)' }}\r\n                >\r\n                  Sign Up\r\n                </Button>\r\n              </Form>\r\n            </Card.Body>\r\n          </Card>\r\n          <div className=\"w-100 text-center mt-2\">\r\n            Already have an account?{' '}\r\n            <Link to=\"/signin\" style={{ color: 'var(--color-main)' }}>\r\n              Sign In\r\n            </Link>\r\n          </div>\r\n          <GoogleSignIn />\r\n          <FacebookSignIn />\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"]},"metadata":{},"sourceType":"module"}