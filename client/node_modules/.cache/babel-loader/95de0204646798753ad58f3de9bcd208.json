{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext}from'react';import axios from'axios';import{FaFacebookF}from'react-icons/fa';import{useHistory}from'react-router-dom';import{Card}from'react-bootstrap';import FacebookLogin from'react-facebook-login';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";function FacebookSignIn(){var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;var history=useHistory();function responseFacebook(_x){return _responseFacebook.apply(this,arguments);}function _responseFacebook(){_responseFacebook=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var res,facebookLoginCall;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:facebookLoginCall=function _facebookLoginCall(userCredential,dispatch){dispatch({type:'LOGIN_START'});try{dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});history.push('/');}catch(err){dispatch({type:\"LOGIN_FAILURE\",payload:err.response.data});}};_context.next=3;return axios({method:'POST',url:\"\".concat(process.env.REACT_APP_API_URL,\"/users/facebookLogin\"),data:{accessToken:response.accessToken,userID:response.userID,picture:response.picture.data.url}});case 3:res=_context.sent;facebookLoginCall({email:res.data.email,password:res.data.password},dispatch);case 5:case\"end\":return _context.stop();}}},_callee);}));return _responseFacebook.apply(this,arguments);}return/*#__PURE__*/_jsx(Card,{style:{width:'350px',margin:'0 auto'},children:/*#__PURE__*/_jsx(Card.Header,{style:{width:'350px'},children:/*#__PURE__*/_jsx(FacebookLogin,{appId:process.env.FACEBOOK_APP_ID,autoLoad:false,buttonStyle:{width:'310px',fontSize:'14px',padding:'3px 0px'},fields:\"name,email,picture\",scope:\"public_profile,user_friends\",callback:responseFacebook,icon:/*#__PURE__*/_jsx(FaFacebookF,{style:{fontSize:'45px',color:'#4c69ba',background:'white',padding:'10px 1px',marginRight:'30px'}})})})});}export default FacebookSignIn;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/FacebookSignIn.js"],"names":["React","useContext","axios","FaFacebookF","useHistory","Card","FacebookLogin","AuthContext","FacebookSignIn","dispatch","history","responseFacebook","response","facebookLoginCall","userCredential","type","payload","res","data","push","err","method","url","process","env","REACT_APP_API_URL","accessToken","userID","picture","email","password","width","margin","FACEBOOK_APP_ID","fontSize","padding","color","background","marginRight"],"mappings":"yTAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,IAAT,KAAqB,iBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,sBAA1B,CACA,OAASC,WAAT,KAA4B,wBAA5B,C,2CAEA,QAASC,CAAAA,cAAT,EAA0B,CACxB,gBAAqBP,UAAU,CAACM,WAAD,CAA/B,CAAQE,QAAR,aAAQA,QAAR,CACA,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAFwB,QAITO,CAAAA,gBAJS,4JAIxB,iBAAgCC,QAAhC,UAWWC,iBAXX,iHAWWA,iBAXX,6BAW6BC,cAX7B,CAW6CL,QAX7C,CAWuD,CACnDA,QAAQ,CAAC,CAAEM,IAAI,CAAE,aAAR,CAAD,CAAR,CACA,GAAI,CACFN,QAAQ,CAAC,CAAEM,IAAI,gBAAN,CAAyBC,OAAO,CAAEC,GAAG,CAACC,IAAtC,CAAD,CAAR,CACAR,OAAO,CAACS,IAAR,CAAa,GAAb,EACD,CAAC,MAAOC,GAAP,CAAY,CACZX,QAAQ,CAAC,CAAEM,IAAI,gBAAN,CAAyBC,OAAO,CAAEI,GAAG,CAACR,QAAJ,CAAaM,IAA/C,CAAD,CAAR,CACD,CACF,CAnBH,uBACoBhB,CAAAA,KAAK,CAAC,CACtBmB,MAAM,CAAE,MADc,CAEtBC,GAAG,WAAKC,OAAO,CAACC,GAAR,CAAYC,iBAAjB,wBAFmB,CAGtBP,IAAI,CAAE,CACJQ,WAAW,CAAEd,QAAQ,CAACc,WADlB,CAEJC,MAAM,CAAEf,QAAQ,CAACe,MAFb,CAGJC,OAAO,CAAEhB,QAAQ,CAACgB,OAAT,CAAiBV,IAAjB,CAAsBI,GAH3B,CAHgB,CAAD,CADzB,QACQL,GADR,eAoBEJ,iBAAiB,CAAC,CAAEgB,KAAK,CAAEZ,GAAG,CAACC,IAAJ,CAASW,KAAlB,CAAyBC,QAAQ,CAAEb,GAAG,CAACC,IAAJ,CAASY,QAA5C,CAAD,CAAyDrB,QAAzD,CAAjB,CApBF,sDAJwB,mDA2BxB,mBACE,KAAC,IAAD,EAAM,KAAK,CAAE,CAAEsB,KAAK,CAAE,OAAT,CAAkBC,MAAM,CAAE,QAA1B,CAAb,uBACE,KAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAAED,KAAK,CAAE,OAAT,CAApB,uBACE,KAAC,aAAD,EACE,KAAK,CAAER,OAAO,CAACC,GAAR,CAAYS,eADrB,CAEE,QAAQ,CAAE,KAFZ,CAGE,WAAW,CAAE,CAAEF,KAAK,CAAE,OAAT,CAAkBG,QAAQ,CAAE,MAA5B,CAAoCC,OAAO,CAAE,SAA7C,CAHf,CAIE,MAAM,CAAC,oBAJT,CAKE,KAAK,CAAC,6BALR,CAME,QAAQ,CAAExB,gBANZ,CAOE,IAAI,cACF,KAAC,WAAD,EACE,KAAK,CAAE,CACLuB,QAAQ,CAAE,MADL,CAELE,KAAK,CAAE,SAFF,CAGLC,UAAU,CAAE,OAHP,CAILF,OAAO,CAAE,UAJJ,CAKLG,WAAW,CAAE,MALR,CADT,EARJ,EADF,EADF,EADF,CAyBD,CAED,cAAe9B,CAAAA,cAAf","sourcesContent":["import React, { useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { FaFacebookF } from 'react-icons/fa';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Card } from 'react-bootstrap';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nfunction FacebookSignIn() {\r\n  const { dispatch } = useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n  async function responseFacebook(response) {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: `${process.env.REACT_APP_API_URL}/users/facebookLogin`,\r\n      data: {\r\n        accessToken: response.accessToken,\r\n        userID: response.userID,\r\n        picture: response.picture.data.url,\r\n      },\r\n    });\r\n\r\n    function facebookLoginCall(userCredential, dispatch) {\r\n      dispatch({ type: 'LOGIN_START' });\r\n      try {\r\n        dispatch({ type: `LOGIN_SUCCESS`, payload: res.data });\r\n        history.push('/');\r\n      } catch (err) {\r\n        dispatch({ type: `LOGIN_FAILURE`, payload: err.response.data });\r\n      }\r\n    }\r\n    facebookLoginCall({ email: res.data.email, password: res.data.password }, dispatch);\r\n  }\r\n\r\n  return (\r\n    <Card style={{ width: '350px', margin: '0 auto' }}>\r\n      <Card.Header style={{ width: '350px' }}>\r\n        <FacebookLogin\r\n          appId={process.env.FACEBOOK_APP_ID}\r\n          autoLoad={false}\r\n          buttonStyle={{ width: '310px', fontSize: '14px', padding: '3px 0px' }}\r\n          fields=\"name,email,picture\"\r\n          scope=\"public_profile,user_friends\"\r\n          callback={responseFacebook}\r\n          icon={\r\n            <FaFacebookF\r\n              style={{\r\n                fontSize: '45px',\r\n                color: '#4c69ba',\r\n                background: 'white',\r\n                padding: '10px 1px',\r\n                marginRight: '30px',\r\n              }}\r\n            />\r\n          }\r\n        />\r\n      </Card.Header>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default FacebookSignIn;\r\n"]},"metadata":{},"sourceType":"module"}