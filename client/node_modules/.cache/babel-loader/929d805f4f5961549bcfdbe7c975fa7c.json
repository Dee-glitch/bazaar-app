{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{Container,Col,Row}from'react-bootstrap';import axios from'axios';import ProductList from'../components/ProductList';import Filters from'../components/Filters';import Category from'../components/Category';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Products=function Products(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allProducts=_useState4[0],setAllProducts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useParams=useParams(),keyword=_useParams.keyword;useEffect(function(){fetchData();fetchDataKeyword();},[keyword]);useEffect(function(){fetchData();},[]);var fetchDataKeyword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3000/api/v1/products/searchedProduct/\".concat(keyword));case 3:response=_context.sent;data=response.data;setProducts(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchDataKeyword(){return _ref.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://localhost:3000/api/v1/products\");case 3:response=_context2.sent;data=response.data;setState(false);setAllProducts(data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();var productsByCategory=allProducts.filter(function(product){return product.categories.length>0&&product.categories[0].name===keyword;});var handlePriceRange=function handlePriceRange(lowPrice,highPrice){var priceRange=productsByCategory.filter(function(item){return item.price>=Number(lowPrice)&&item.price<=Number(highPrice);});setState(true);setProducts(priceRange);};var handleState=function handleState(state){var stateList=productsByCategory.filter(function(item){return item.condition===state;});setState(true);setProducts(stateList);};var oldNewProducts=function oldNewProducts(){var sortedOldNew=productsByCategory.sort(function sortProductsByDateDesc(a,b){var dateA=new Date(a.createdAt),dateB=new Date(b.createdAt);return dateA-dateB;});setState(true);setProducts(sortedOldNew);};var newOldProducts=function newOldProducts(){var sortedNewOld=productsByCategory.sort(function sortProductsByDateDesc(a,b){var dateA=new Date(a.createdAt),dateB=new Date(b.createdAt);return dateB-dateA;});setState(true);setProducts(sortedNewOld);};var handleLocation=function handleLocation(location){var sortedLocation=productsByCategory.filter(function(item){return item.city.toLowerCase()===location.toLowerCase();});setState(true);setProducts(sortedLocation);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Filters,{products:productsByCategory,handlePriceRange:handlePriceRange,handleState:handleState,oldNewProducts:oldNewProducts,newOldProducts:newOldProducts,handleLocation:handleLocation,fetchData:fetchData}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:4,lg:3,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Category,{})})}),/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:9,children:/*#__PURE__*/_jsxs(\"div\",{children:[products.length===0&&productsByCategory.length!==0&&!state&&/*#__PURE__*/_jsx(ProductList,{products:productsByCategory}),products.length!==0&&productsByCategory.length!==0&&/*#__PURE__*/_jsx(ProductList,{products:products}),products.length!==0&&!state&&/*#__PURE__*/_jsx(ProductList,{products:products}),products.length===0&&state&&/*#__PURE__*/_jsx(\"h1\",{className:\"text-center margin-t-3\",children:\"No Items Available \"}),products.length===0&&productsByCategory.length===0&&/*#__PURE__*/_jsx(ProductList,{products:allProducts}),productsByCategory.length===0&&products.length===0&&!state&&/*#__PURE__*/_jsx(\"h1\",{className:\"text-center margin-t-3\",children:\"No Items Available \"})]})})]})})]});};export default Products;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/pages/ProductsPage.js"],"names":["React","useState","useEffect","useParams","Container","Col","Row","axios","ProductList","Filters","Category","Products","products","setProducts","allProducts","setAllProducts","state","setState","keyword","fetchData","fetchDataKeyword","get","response","data","console","log","productsByCategory","filter","product","categories","length","name","handlePriceRange","lowPrice","highPrice","priceRange","item","price","Number","handleState","stateList","condition","oldNewProducts","sortedOldNew","sort","sortProductsByDateDesc","a","b","dateA","Date","createdAt","dateB","newOldProducts","sortedNewOld","handleLocation","location","sortedLocation","city","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Container, Col, Row } from 'react-bootstrap';\r\n\r\nimport axios from 'axios';\r\nimport ProductList from '../components/ProductList';\r\nimport Filters from '../components/Filters';\r\nimport Category from '../components/Category';\r\n\r\nconst Products = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  const [state, setState] = useState(false);\r\n  const { keyword } = useParams();\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    fetchDataKeyword();\r\n  }, [keyword]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchDataKeyword = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://localhost:3000/api/v1/products/searchedProduct/${keyword}`,\r\n      );\r\n      const { data } = response;\r\n\r\n      setProducts(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:3000/api/v1/products`);\r\n      const { data } = response;\r\n      setState(false);\r\n      setAllProducts(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const productsByCategory = allProducts.filter(\r\n    (product) => product.categories.length > 0 && product.categories[0].name === keyword,\r\n  );\r\n\r\n  const handlePriceRange = (lowPrice, highPrice) => {\r\n    const priceRange = productsByCategory.filter(\r\n      (item) => item.price >= Number(lowPrice) && item.price <= Number(highPrice),\r\n    );\r\n    setState(true);\r\n    setProducts(priceRange);\r\n  };\r\n\r\n  const handleState = (state) => {\r\n    const stateList = productsByCategory.filter((item) => item.condition === state);\r\n    setState(true);\r\n    setProducts(stateList);\r\n  };\r\n\r\n  const oldNewProducts = () => {\r\n    const sortedOldNew = productsByCategory.sort(function sortProductsByDateDesc(a, b) {\r\n      const dateA = new Date(a.createdAt),\r\n        dateB = new Date(b.createdAt);\r\n      return dateA - dateB;\r\n    });\r\n    setState(true);\r\n    setProducts(sortedOldNew);\r\n  };\r\n\r\n  const newOldProducts = () => {\r\n    const sortedNewOld = productsByCategory.sort(function sortProductsByDateDesc(a, b) {\r\n      const dateA = new Date(a.createdAt),\r\n        dateB = new Date(b.createdAt);\r\n      return dateB - dateA;\r\n    });\r\n    setState(true);\r\n    setProducts(sortedNewOld);\r\n  };\r\n\r\n  const handleLocation = (location) => {\r\n    const sortedLocation = productsByCategory.filter(\r\n      (item) => item.city.toLowerCase() === location.toLowerCase(),\r\n    );\r\n    setState(true);\r\n    setProducts(sortedLocation);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Filters\r\n        products={productsByCategory}\r\n        handlePriceRange={handlePriceRange}\r\n        handleState={handleState}\r\n        oldNewProducts={oldNewProducts}\r\n        newOldProducts={newOldProducts}\r\n        handleLocation={handleLocation}\r\n        fetchData={fetchData}\r\n      />\r\n\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12} md={4} lg={3}>\r\n            <div>\r\n              <Category />\r\n            </div>\r\n          </Col>\r\n          <Col xs={12} md={8} lg={9}>\r\n            <div>\r\n              {products.length === 0 && productsByCategory.length !== 0 && !state && (\r\n                <ProductList products={productsByCategory} />\r\n              )}\r\n\r\n              {products.length !== 0 && productsByCategory.length !== 0 && (\r\n                <ProductList products={products} />\r\n              )}\r\n\r\n              {products.length !== 0 && !state && <ProductList products={products} />}\r\n\r\n              {products.length === 0 && state && (\r\n                <h1 className=\"text-center margin-t-3\">No Items Available </h1>\r\n              )}\r\n              {products.length === 0 && productsByCategory.length === 0 && (\r\n                <ProductList products={allProducts} />\r\n              )}\r\n              {productsByCategory.length === 0 && products.length === 0 && !state && (\r\n                <h1 className=\"text-center margin-t-3\">No Items Available </h1>\r\n              )}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}