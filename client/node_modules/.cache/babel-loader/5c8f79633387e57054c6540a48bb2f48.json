{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{Card,Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyProducts=function MyProducts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(user._id));case 3:response=_context.sent;setUserData(response.data.products);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _fetchUser.apply(this,arguments);}function deleteProduct(_x){return _deleteProduct.apply(this,arguments);}function _deleteProduct(){_deleteProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var response,filteredProducts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/products/\").concat(id));case 3:response=_context2.sent;filteredProducts=userData.filter(function(filteredProduct){return filteredProduct._id!==id;});setUserData(filteredProducts);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return _deleteProduct.apply(this,arguments);}useEffect(function(){fetchUser();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap justify-content-center\",children:userData.length!==0?userData.map(function(product){return/*#__PURE__*/_jsxs(Card,{className:\"m-3\",style:{width:'15rem'},children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:product.images,alt:product.title,style:{height:'200px',objectFit:'cover',objectPosition:'center'}}),/*#__PURE__*/_jsxs(Card.Body,{style:{color:'var(--color-main)'},children:[/*#__PURE__*/_jsx(Card.Title,{children:product.title}),/*#__PURE__*/_jsxs(Card.Text,{children:[product.price,\" \\u20AC\"]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteProduct(product._id);},variant:\"danger\",children:\"Delete\"}),/*#__PURE__*/_jsx(Link,{to:\"/update/\".concat(product._id),children:/*#__PURE__*/_jsx(Button,{style:{background:'var(--color-main)',color:'white',marginLeft:'5px'},children:\"Edit\"})})]})]},product._id);}):/*#__PURE__*/_jsx(\"h1\",{children:\"No Products Yet\"})});};export default MyProducts;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/MyProducts.js"],"names":["React","useState","useContext","useEffect","axios","Link","AuthContext","Card","Button","MyProducts","userData","setUserData","user","fetchUser","get","process","env","REACT_APP_API_URL","_id","response","data","products","console","log","deleteProduct","id","delete","filteredProducts","filter","filteredProduct","length","map","product","width","images","title","height","objectFit","objectPosition","color","price","background","marginLeft"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,iBAA7B,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,cAAgCR,QAAQ,CAAC,EAAD,CAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,gBAAiBT,UAAU,CAACI,WAAD,CAA3B,CAAQM,IAAR,aAAQA,IAAR,CAFuB,QAIRC,CAAAA,SAJQ,qIAIvB,sLAE2BT,CAAAA,KAAK,CAACU,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,mBAAoDL,IAAI,CAACM,GAAzD,EAF3B,QAEUC,QAFV,eAGIR,WAAW,CAACQ,QAAQ,CAACC,IAAT,CAAcC,QAAf,CAAX,CAHJ,+EAKIC,OAAO,CAACC,GAAR,cALJ,oEAJuB,oDAYRC,CAAAA,aAZQ,mJAYvB,kBAA6BC,EAA7B,4LAE2BrB,CAAAA,KAAK,CAACsB,MAAN,WAAgBX,OAAO,CAACC,GAAR,CAAYC,iBAA5B,sBAA0DQ,EAA1D,EAF3B,QAEUN,QAFV,gBAGUQ,gBAHV,CAG6BjB,QAAQ,CAACkB,MAAT,CAAgB,SAACC,eAAD,CAAqB,CAC5D,MAAOA,CAAAA,eAAe,CAACX,GAAhB,GAAwBO,EAA/B,CACD,CAFwB,CAH7B,CAMId,WAAW,CAACgB,gBAAD,CAAX,CANJ,mFAQIL,OAAO,CAACC,GAAR,eARJ,sEAZuB,gDAuBvBpB,SAAS,CAAC,UAAM,CACdU,SAAS,GACV,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,YAAK,SAAS,CAAC,yCAAf,UACGH,QAAQ,CAACoB,MAAT,GAAoB,CAApB,CACCpB,QAAQ,CAACqB,GAAT,CAAa,SAACC,OAAD,CAAa,CACxB,mBACE,MAAC,IAAD,EAAM,SAAS,CAAC,KAAhB,CAAsB,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAA7B,wBACE,KAAC,IAAD,CAAM,GAAN,EACE,OAAO,CAAC,KADV,CAEE,GAAG,CAAED,OAAO,CAACE,MAFf,CAGE,GAAG,CAAEF,OAAO,CAACG,KAHf,CAIE,KAAK,CAAE,CACLC,MAAM,CAAE,OADH,CAELC,SAAS,CAAE,OAFN,CAGLC,cAAc,CAAE,QAHX,CAJT,EADF,cAWE,MAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,CAAEC,KAAK,CAAE,mBAAT,CAAlB,wBACE,KAAC,IAAD,CAAM,KAAN,WAAaP,OAAO,CAACG,KAArB,EADF,cAEE,MAAC,IAAD,CAAM,IAAN,YAAYH,OAAO,CAACQ,KAApB,aAFF,cAGE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMhB,CAAAA,aAAa,CAACQ,OAAO,CAACd,GAAT,CAAnB,EAAjB,CAAmD,OAAO,CAAC,QAA3D,oBAHF,cAME,KAAC,IAAD,EAAM,EAAE,mBAAac,OAAO,CAACd,GAArB,CAAR,uBACE,KAAC,MAAD,EACE,KAAK,CAAE,CAAEuB,UAAU,CAAE,mBAAd,CAAmCF,KAAK,CAAE,OAA1C,CAAmDG,UAAU,CAAE,KAA/D,CADT,kBADF,EANF,GAXF,GAAsDV,OAAO,CAACd,GAA9D,CADF,CA4BD,CA7BD,CADD,cAgCC,uCAjCJ,EADF,CAsCD,CAjED,CAmEA,cAAeT,CAAAA,UAAf","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { Card, Button } from 'react-bootstrap';\r\n\r\nconst MyProducts = () => {\r\n  const [userData, setUserData] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  async function fetchUser() {\r\n    try {\r\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/users/${user._id}`);\r\n      setUserData(response.data.products);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  async function deleteProduct(id) {\r\n    try {\r\n      const response = await axios.delete(`${process.env.REACT_APP_API_URL}/products/${id}`);\r\n      const filteredProducts = userData.filter((filteredProduct) => {\r\n        return filteredProduct._id !== id;\r\n      });\r\n      setUserData(filteredProducts);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"d-flex flex-wrap justify-content-center\">\r\n      {userData.length !== 0 ? (\r\n        userData.map((product) => {\r\n          return (\r\n            <Card className=\"m-3\" style={{ width: '15rem' }} key={product._id}>\r\n              <Card.Img\r\n                variant=\"top\"\r\n                src={product.images}\r\n                alt={product.title}\r\n                style={{\r\n                  height: '200px',\r\n                  objectFit: 'cover',\r\n                  objectPosition: 'center',\r\n                }}\r\n              />\r\n              <Card.Body style={{ color: 'var(--color-main)' }}>\r\n                <Card.Title>{product.title}</Card.Title>\r\n                <Card.Text>{product.price} â‚¬</Card.Text>\r\n                <Button onClick={() => deleteProduct(product._id)} variant=\"danger\">\r\n                  Delete\r\n                </Button>\r\n                <Link to={`/update/${product._id}`}>\r\n                  <Button\r\n                    style={{ background: 'var(--color-main)', color: 'white', marginLeft: '5px' }}\r\n                  >\r\n                    Edit\r\n                  </Button>\r\n                </Link>\r\n              </Card.Body>\r\n            </Card>\r\n          );\r\n        })\r\n      ) : (\r\n        <h1>No Products Yet</h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyProducts;\r\n"]},"metadata":{},"sourceType":"module"}