{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{AuthContext}from'../context/AuthContext';import AdminPanel from'../components/AdminPanel';import Orders from'../components/Orders';import Favorites from'../components/Favorites';import MyProducts from'../components/MyProducts';import Profile from'../components/Profile';import Button from'react-bootstrap/Button';import Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{Container,Alert}from'react-bootstrap';import{GrUserAdmin}from'react-icons/gr';import{FiRefreshCcw}from'react-icons/fi';import LoadingImage from'../images/Loading.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var styles=[{height:'25px',width:'25px',backgroundColor:'red',color:'white',borderRadius:'50%',display:'inline-block',textAlign:'center',marginLeft:'0.5rem'},{maxHeight:'30rem',overflow:'auto',background:'#fff'}];var MyAccountPage=function MyAccountPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setIsLoaded=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),err=_useState4[0],setErr=_useState4[1];var _useContext=useContext(AuthContext),user=_useContext.user;var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),userFromDB=_useState6[0],setUserFromDB=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];useEffect(function(){fetchUser();},[toggle]);var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(user._id));case 3:response=_context.sent;setUserFromDB(response.data);setIsLoaded(true);setErr(false);_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setIsLoaded(false);setErr(true);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();if(!isLoaded&&!err){return/*#__PURE__*/_jsx(\"img\",{src:LoadingImage,style:{margin:'0 auto',display:'block',height:'65vh'}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{type:\"text/css\",children:\"\\n.nav-link {\\n  color: var(--color-grey);\\n    cursor: default;\\n}\\n.nav-link.active {\\n    font-weight:bold;\\n}\\n.nav-link:hover {\\n  color: var(--color-grey);\\n  }\\n.btn-outline-success span {\\n    max-width: 0;\\n    -webkit-transition: max-width 1s;\\n    transition: max-width 1s;\\n    display: inline-block;\\n    vertical-align: top;\\n    white-space: nowrap;\\n    overflow: hidden;\\n  }\\n.btn-outline-success:hover span {\\n    max-width: 7rem;\\n  }\\n    \"}),isLoaded&&!err?/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Account\"}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-success\",style:{borderRadius:'2.5em'},onClick:function onClick(){return setToggle(function(toggle){return!toggle;});},children:[/*#__PURE__*/_jsx(FiRefreshCcw,{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\" Refresh Content \"})]})]}),/*#__PURE__*/_jsxs(Tabs,{justify:true,defaultActiveKey:\"products\",transition:false,children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"Orders\",style:styles[1],title:/*#__PURE__*/_jsxs(React.Fragment,{children:[\"Orders\",/*#__PURE__*/_jsx(\"span\",{style:styles[0],children:userFromDB.orders.length})]}),children:/*#__PURE__*/_jsx(Orders,{orders:isLoaded?userFromDB.orders:/*#__PURE__*/_jsx(_Fragment,{})})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"notification\",style:styles[1],title:/*#__PURE__*/_jsxs(React.Fragment,{children:[\"Notifications\",/*#__PURE__*/_jsx(\"span\",{style:styles[0],children:\"4\"})]}),children:/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"favorites\",style:styles[1],title:/*#__PURE__*/_jsxs(React.Fragment,{children:[\"Favorites\",/*#__PURE__*/_jsx(\"span\",{style:styles[0],children:userFromDB.favorites.length})]}),children:/*#__PURE__*/_jsx(Favorites,{})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"myProducts\",style:styles[1],title:/*#__PURE__*/_jsxs(React.Fragment,{children:[\"My Products\",/*#__PURE__*/_jsx(\"span\",{style:styles[0],children:userFromDB.products.length})]}),children:/*#__PURE__*/_jsx(MyProducts,{})}),user.expert?/*#__PURE__*/_jsx(Tab,{eventKey:\"admin\",style:styles[1],title:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(GrUserAdmin,{style:{marginLeft:'6px'}}),\" Admin Panel\"]}),children:/*#__PURE__*/_jsx(AdminPanel,{})}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Profile,{user:isLoaded?userFromDB:/*#__PURE__*/_jsx(_Fragment,{})})]}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:\"You are logged out. Please log in.\"})})]});};export default MyAccountPage;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/pages/MyAccountPage.js"],"names":["React","useState","useEffect","useContext","axios","AuthContext","AdminPanel","Orders","Favorites","MyProducts","Profile","Button","Tabs","Tab","Container","Alert","GrUserAdmin","FiRefreshCcw","LoadingImage","styles","height","width","backgroundColor","color","borderRadius","display","textAlign","marginLeft","maxHeight","overflow","background","MyAccountPage","isLoaded","setIsLoaded","err","setErr","user","userFromDB","setUserFromDB","toggle","setToggle","fetchUser","get","process","env","REACT_APP_API_URL","_id","response","data","console","log","margin","justifyContent","orders","length","favorites","products","expert"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport AdminPanel from '../components/AdminPanel';\r\nimport Orders from '../components/Orders';\r\nimport Favorites from '../components/Favorites';\r\nimport MyProducts from '../components/MyProducts';\r\nimport Profile from '../components/Profile';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport { Container, Alert } from 'react-bootstrap';\r\nimport { GrUserAdmin } from 'react-icons/gr';\r\nimport { FiRefreshCcw } from 'react-icons/fi';\r\nimport LoadingImage from '../images/Loading.gif';\r\n\r\nconst styles = [\r\n  {\r\n    height: '25px',\r\n    width: '25px',\r\n    backgroundColor: 'red',\r\n    color: 'white',\r\n    borderRadius: '50%',\r\n    display: 'inline-block',\r\n    textAlign: 'center',\r\n    marginLeft: '0.5rem',\r\n  },\r\n  {\r\n    maxHeight: '30rem',\r\n    overflow: 'auto',\r\n    background: '#fff',\r\n  },\r\n];\r\n\r\nconst MyAccountPage = () => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [err, setErr] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const [userFromDB, setUserFromDB] = useState({});\r\n  const [toggle, setToggle] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [toggle]);\r\n\r\n  const fetchUser = async () => {\r\n    try {\r\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/users/${user._id}`);\r\n      setUserFromDB(response.data);\r\n      setIsLoaded(true);\r\n      setErr(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsLoaded(false);\r\n      setErr(true);\r\n    }\r\n  };\r\n\r\n  if (!isLoaded && !err) {\r\n    return (\r\n      <img src={LoadingImage} style={{ margin: '0 auto', display: 'block', height: '65vh' }} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <style type=\"text/css\">\r\n        {`\r\n.nav-link {\r\n  color: var(--color-grey);\r\n    cursor: default;\r\n}\r\n.nav-link.active {\r\n    font-weight:bold;\r\n}\r\n.nav-link:hover {\r\n  color: var(--color-grey);\r\n  }\r\n.btn-outline-success span {\r\n    max-width: 0;\r\n    -webkit-transition: max-width 1s;\r\n    transition: max-width 1s;\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n  }\r\n.btn-outline-success:hover span {\r\n    max-width: 7rem;\r\n  }\r\n    `}\r\n      </style>\r\n      {isLoaded && !err ? (\r\n        <Container>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <h1>My Account</h1>\r\n            <Button\r\n              variant=\"outline-success\"\r\n              style={{ borderRadius: '2.5em' }}\r\n              onClick={() => setToggle((toggle) => !toggle)}\r\n            >\r\n              <FiRefreshCcw /> <span> Refresh Content </span>\r\n            </Button>\r\n          </div>\r\n          <Tabs justify defaultActiveKey=\"products\" transition={false}>\r\n            <Tab\r\n              eventKey=\"Orders\"\r\n              style={styles[1]}\r\n              title={\r\n                <React.Fragment>\r\n                  Orders\r\n                  <span style={styles[0]}>{userFromDB.orders.length}</span>\r\n                </React.Fragment>\r\n              }\r\n            >\r\n              <Orders orders={isLoaded ? userFromDB.orders : <></>} />\r\n            </Tab>\r\n            <Tab\r\n              eventKey=\"notification\"\r\n              style={styles[1]}\r\n              title={\r\n                <React.Fragment>\r\n                  Notifications\r\n                  <span style={styles[0]}>4</span>\r\n                </React.Fragment>\r\n              }\r\n            >\r\n              <></>\r\n            </Tab>\r\n            <Tab\r\n              eventKey=\"favorites\"\r\n              style={styles[1]}\r\n              title={\r\n                <React.Fragment>\r\n                  Favorites\r\n                  <span style={styles[0]}>{userFromDB.favorites.length}</span>\r\n                </React.Fragment>\r\n              }\r\n            >\r\n              <Favorites />\r\n            </Tab>\r\n            <Tab\r\n              eventKey=\"myProducts\"\r\n              style={styles[1]}\r\n              title={\r\n                <React.Fragment>\r\n                  My Products\r\n                  <span style={styles[0]}>{userFromDB.products.length}</span>\r\n                </React.Fragment>\r\n              }\r\n            >\r\n              <MyProducts />\r\n            </Tab>\r\n            {user.expert ? (\r\n              <Tab\r\n                eventKey=\"admin\"\r\n                style={styles[1]}\r\n                title={\r\n                  <React.Fragment>\r\n                    <GrUserAdmin style={{ marginLeft: '6px' }} /> Admin Panel\r\n                  </React.Fragment>\r\n                }\r\n              >\r\n                <AdminPanel />\r\n              </Tab>\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </Tabs>\r\n          <hr />\r\n          <Profile user={isLoaded ? userFromDB : <></>} />\r\n        </Container>\r\n      ) : (\r\n        <Container>\r\n          <Alert variant=\"danger\">You are logged out. Please log in.</Alert>\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MyAccountPage;\r\n"]},"metadata":{},"sourceType":"module"}