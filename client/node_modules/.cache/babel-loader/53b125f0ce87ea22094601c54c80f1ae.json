{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import React,{useRef,useContext}from'react';import{AuthContext}from'../context/AuthContext';import{Button,Card,Col,Form,Row}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddressForm=function AddressForm(_ref){var getNewAddress=_ref.getNewAddress;var _useContext=useContext(AuthContext),user=_useContext.user;var cityRef=useRef();var commentRef=useRef();var countryRef=useRef();var lastNameRef=useRef();var postCodeRef=useRef();var extensionRef=useRef();var firstNameRef=useRef();var streetNameRef=useRef();var buildingNumberRef=useRef();var addToLocalStorage=function addToLocalStorage(id){var userData=JSON.parse(localStorage.user);userData.addresses.push(id);localStorage.setItem('user',JSON.stringify(userData));};var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newAddress,isValid,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newAddress={user:user._id,city:cityRef.current.value||null,last_name:lastNameRef.current.value,extension:extensionRef.current.value,first_name:firstNameRef.current.value,comment:commentRef.current.value||'',country:countryRef.current.value||null,post_code:postCodeRef.current.value||null,street_name:streetNameRef.current.value||null,building_number:buildingNumberRef.current.value||null};isValid=function isValid(){for(var key in newAddress){if(newAddress[key]===null)return false;}return true;};if(!isValid()){_context.next=9;break;}_context.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/addresses/create\"),newAddress);case 6:response=_context.sent;getNewAddress(response.data.address);addToLocalStorage(response.data.address._id);case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{style:cardStyles,children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Shipping Address\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:firstNameRef,style:inputStyles,placeholder:\"First Name\"})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:lastNameRef,style:inputStyles,placeholder:\"Last Name\"})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",style:inputStyles,ref:streetNameRef,placeholder:\"Street Name *\"})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",style:inputStyles,ref:buildingNumberRef,placeholder:\"Building Number *\"})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:extensionRef,style:inputStyles,placeholder:\"Ext. (Optional)\"})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:postCodeRef,style:inputStyles,placeholder:\"Post Code *\"})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:cityRef,placeholder:\"City *\",style:inputStyles})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:countryRef,style:inputStyles,placeholder:\"Country *\"})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:commentRef,style:inputStyles,placeholder:\"Comment (Optional)\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(Button,{value:\"Add\",type:\"submit\",style:btnStyles,onClick:handleClick,className:\"btn btn-primary\",children:\"Add\"})})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});};var cardStyles={marginBottom:'10px',borderColor:'var(--color-main)'};var inputStyles={width:'100%',marginBottom:'10px'};var btnStyles={marginTop:'10px',background:'var(--color-main)'};export default AddressForm;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/AddressForm.js"],"names":["axios","React","useRef","useContext","AuthContext","Button","Card","Col","Form","Row","AddressForm","getNewAddress","user","cityRef","commentRef","countryRef","lastNameRef","postCodeRef","extensionRef","firstNameRef","streetNameRef","buildingNumberRef","addToLocalStorage","id","userData","JSON","parse","localStorage","addresses","push","setItem","stringify","handleClick","e","preventDefault","newAddress","_id","city","current","value","last_name","extension","first_name","comment","country","post_code","street_name","building_number","isValid","key","post","process","env","REACT_APP_API_URL","response","data","address","cardStyles","inputStyles","btnStyles","marginBottom","borderColor","width","marginTop","background"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useRef, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { Button, Card, Col, Form, Row } from 'react-bootstrap';\r\n\r\nconst AddressForm = ({ getNewAddress }) => {\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const cityRef = useRef();\r\n  const commentRef = useRef();\r\n  const countryRef = useRef();\r\n  const lastNameRef = useRef();\r\n  const postCodeRef = useRef();\r\n  const extensionRef = useRef();\r\n  const firstNameRef = useRef();\r\n  const streetNameRef = useRef();\r\n  const buildingNumberRef = useRef();\r\n\r\n  const addToLocalStorage = (id) => {\r\n    const userData = JSON.parse(localStorage.user);\r\n\r\n    userData.addresses.push(id);\r\n\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const newAddress = {\r\n      user: user._id,\r\n      city: cityRef.current.value || null,\r\n      last_name: lastNameRef.current.value,\r\n      extension: extensionRef.current.value,\r\n      first_name: firstNameRef.current.value,\r\n      comment: commentRef.current.value || '',\r\n      country: countryRef.current.value || null,\r\n      post_code: postCodeRef.current.value || null,\r\n      street_name: streetNameRef.current.value || null,\r\n      building_number: buildingNumberRef.current.value || null,\r\n    };\r\n\r\n    const isValid = () => {\r\n      for (const key in newAddress) if (newAddress[key] === null) return false;\r\n      return true;\r\n    };\r\n\r\n    if (isValid()) {\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/addresses/create`,\r\n        newAddress,\r\n      );\r\n\r\n      getNewAddress(response.data.address);\r\n\r\n      addToLocalStorage(response.data.address._id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card style={cardStyles}>\r\n        <Card.Header>Shipping Address</Card.Header>\r\n        <Card.Body>\r\n          <Row>\r\n            <Col md={6}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={firstNameRef}\r\n                style={inputStyles}\r\n                placeholder=\"First Name\"\r\n              />\r\n            </Col>\r\n\r\n            <Col md={6}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={lastNameRef}\r\n                style={inputStyles}\r\n                placeholder=\"Last Name\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col md={6}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                style={inputStyles}\r\n                ref={streetNameRef}\r\n                placeholder=\"Street Name *\"\r\n              />\r\n            </Col>\r\n\r\n            <Col md={4}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                style={inputStyles}\r\n                ref={buildingNumberRef}\r\n                placeholder=\"Building Number *\"\r\n              />\r\n            </Col>\r\n\r\n            <Col md={2}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={extensionRef}\r\n                style={inputStyles}\r\n                placeholder=\"Ext. (Optional)\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col md={4}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={postCodeRef}\r\n                style={inputStyles}\r\n                placeholder=\"Post Code *\"\r\n              />\r\n            </Col>\r\n\r\n            <Col md={4}>\r\n              <Form.Control type=\"text\" ref={cityRef} placeholder=\"City *\" style={inputStyles} />\r\n            </Col>\r\n\r\n            <Col md={4}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={countryRef}\r\n                style={inputStyles}\r\n                placeholder=\"Country *\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form.Control\r\n                type=\"text\"\r\n                ref={commentRef}\r\n                style={inputStyles}\r\n                placeholder=\"Comment (Optional)\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col md={12}>\r\n              <Button\r\n                value=\"Add\"\r\n                type=\"submit\"\r\n                style={btnStyles}\r\n                onClick={handleClick}\r\n                className=\"btn btn-primary\"\r\n              >\r\n                Add\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n      </Card>\r\n      <br />\r\n      <br />\r\n    </>\r\n  );\r\n};\r\n\r\nconst cardStyles = {\r\n  marginBottom: '10px',\r\n  borderColor: 'var(--color-main)',\r\n};\r\n\r\nconst inputStyles = {\r\n  width: '100%',\r\n  marginBottom: '10px',\r\n};\r\n\r\nconst btnStyles = {\r\n  marginTop: '10px',\r\n  background: 'var(--color-main)',\r\n};\r\n\r\nexport default AddressForm;\r\n"]},"metadata":{},"sourceType":"module"}