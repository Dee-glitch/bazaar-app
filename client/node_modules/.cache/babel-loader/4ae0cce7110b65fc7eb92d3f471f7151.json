{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dee/Desktop/test-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{Navbar,Container,Nav,NavDropdown}from'react-bootstrap';import{AuthContext}from'../context/AuthContext';import{useHistory}from'react-router-dom';import Search from'./Search';import axios from'axios';import{Route}from'react-router-dom';import logo from'../images/bzar1.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Header=function Header(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var history=useHistory();useEffect(function(){fetchCategories();},[]);function fetchCategories(){return _fetchCategories.apply(this,arguments);}function _fetchCategories(){_fetchCategories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/categories\"));case 3:res=_context2.sent;setCategories(res.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return _fetchCategories.apply(this,arguments);}var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localStorage.removeItem(\"user\");window.location.href=\"/\";case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleLogout(){return _ref.apply(this,arguments);};}();var handleDropdownItem=function handleDropdownItem(e){var keyword=e.target.innerText;history.replace(\"/products/\".concat(keyword),\"/\".concat(keyword));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{collapseOnSelect:true,expand:\"lg\",variant:\"light\",style:{background:'teal'},children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,style:{width:'140px',objectFit:'cover',height:'60px'},alt:\"bazaar\"})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"responsive-navbar-nav\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"responsive-navbar-nav\",children:[/*#__PURE__*/_jsxs(Nav,{className:\"me-auto\",style:{color:'var(--color-main)'},children:[/*#__PURE__*/_jsx(NavDropdown,{title:/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--color-light)'},children:\"Categories\"}),id:\"nav-dropdown\",children:categories.map(function(category){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(NavDropdown.Item,{onClick:function onClick(e){return handleDropdownItem(e);},style:{color:'var(--color-main)'},children:[' ',category.name]})},category._id);})}),/*#__PURE__*/_jsx(Nav.Link,{href:\"/Info\",style:{color:'var(--color-light)'},children:\"Info\"})]}),user&&/*#__PURE__*/_jsx(Nav.Link,{href:\"/products/add\",id:\"add-product-link\",style:{color:'var(--color-light)'},children:\"Add product\"}),/*#__PURE__*/_jsxs(Nav,{children:[user?/*#__PURE__*/_jsx(Nav.Link,{href:\"/account\",style:{color:'var(--color-light)'},children:\"My Account\"}):/*#__PURE__*/_jsx(Nav.Link,{href:\"/signup\",style:{color:'var(--color-light)'},children:\"Sign Up\"}),user?/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",onClick:handleLogout,style:{color:'var(--color-light)'},children:\"Sign Out\"}):/*#__PURE__*/_jsx(Nav.Link,{href:\"/signin\",style:{color:'var(--color-light)'},children:\"Sign In\"})]})]})]})}),/*#__PURE__*/_jsx(Route,{render:function render(_ref2){var history=_ref2.history;return/*#__PURE__*/_jsx(Search,{history:history});}})]});};export default Header;","map":{"version":3,"sources":["C:/Users/Dee/Desktop/test-deploy/client/src/components/Header.js"],"names":["React","useState","useEffect","useContext","Navbar","Container","Nav","NavDropdown","AuthContext","useHistory","Search","axios","Route","logo","Header","categories","setCategories","user","history","fetchCategories","get","process","env","REACT_APP_API_URL","res","data","console","log","handleLogout","localStorage","removeItem","window","location","href","handleDropdownItem","e","keyword","target","innerText","replace","background","width","objectFit","height","color","map","category","name","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Navbar, Container, Nav, NavDropdown } from 'react-bootstrap';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Search from './Search';\r\nimport axios from 'axios';\r\nimport { Route } from 'react-router-dom';\r\nimport logo from '../images/bzar1.png';\r\n\r\nconst Header = () => {\r\n  const [categories, setCategories] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  async function fetchCategories() {\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/categories`);\r\n      setCategories(res.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  const handleLogout = async () => {\r\n    localStorage.removeItem(`user`);\r\n    window.location.href = `/`;\r\n  };\r\n\r\n  const handleDropdownItem = (e) => {\r\n    const keyword = e.target.innerText;\r\n    history.replace(`/products/${keyword}`, `/${keyword}`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar collapseOnSelect expand=\"lg\" variant=\"light\" style={{ background: 'teal' }}>\r\n        <Container>\r\n          <Navbar.Brand href=\"/\">\r\n            <img\r\n              src={logo}\r\n              style={{ width: '140px', objectFit: 'cover', height: '60px' }}\r\n              alt=\"bazaar\"\r\n            />\r\n          </Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n            <Nav className=\"me-auto\" style={{ color: 'var(--color-main)' }}>\r\n              <NavDropdown\r\n                title={<span style={{ color: 'var(--color-light)' }}>Categories</span>}\r\n                id=\"nav-dropdown\"\r\n              >\r\n                {categories.map((category) => {\r\n                  return (\r\n                    <div key={category._id}>\r\n                      <NavDropdown.Item\r\n                        onClick={(e) => handleDropdownItem(e)}\r\n                        style={{ color: 'var(--color-main)' }}\r\n                      >\r\n                        {' '}\r\n                        {category.name}\r\n                      </NavDropdown.Item>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </NavDropdown>\r\n              <Nav.Link href=\"/Info\" style={{ color: 'var(--color-light)' }}>\r\n                Info\r\n              </Nav.Link>\r\n            </Nav>\r\n\r\n            {user && (\r\n              <Nav.Link\r\n                href=\"/products/add\"\r\n                id=\"add-product-link\"\r\n                style={{ color: 'var(--color-light)' }}\r\n              >\r\n                Add product\r\n              </Nav.Link>\r\n            )}\r\n\r\n            <Nav>\r\n              {user ? (\r\n                <Nav.Link href={`/account`} style={{ color: 'var(--color-light)' }}>\r\n                  My Account\r\n                </Nav.Link>\r\n              ) : (\r\n                <Nav.Link href=\"/signup\" style={{ color: 'var(--color-light)' }}>\r\n                  Sign Up\r\n                </Nav.Link>\r\n              )}\r\n              {user ? (\r\n                <Nav.Link href=\"/\" onClick={handleLogout} style={{ color: 'var(--color-light)' }}>\r\n                  Sign Out\r\n                </Nav.Link>\r\n              ) : (\r\n                <Nav.Link href=\"/signin\" style={{ color: 'var(--color-light)' }}>\r\n                  Sign In\r\n                </Nav.Link>\r\n              )}\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n        </Container>\r\n      </Navbar>\r\n      <Route render={({ history }) => <Search history={history} />} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}